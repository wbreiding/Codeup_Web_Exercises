<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Weather API Exercises</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/theme.css" rel="stylesheet">
    <style>
      .alert {
        width:30%;
        float:left;
        margin-right:10px;
      }
      .temp {
        font-size: 15px;
        font-weight: bold;
      }
    </style>

  </head>

  <body>
    <h1 id="page-header">Weather</h1>
    <label for="latitude">Latitude</label><input type="text" name="latitude" /><label for="longitude">Longitude</label><input type="text" name="longitude" />
    <button name="submit" value="submit" id="submit">Submit</button>
    
    <div class="row" id="weather">
    </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>

      var data = $.get("http://api.openweathermap.org/data/2.5/forecast", {
          APPID: "833158f37db5d4e8f2254b96700453eb",
          q:     "San Antonio, TX",
          units: "imperial",
          cnt: 3
      });
      var printData = "";
      data.done(function(data) {
        console.log(data);
        var city = data.city.name;
        var conditionArray = data.list;
        var condition = "";
        var icon = "";
        printData = "<h2 class='page-header'>" + city + "</h2>";
        conditionArray.forEach(function(element,index,array) {
          var minTemp = element.main.temp_min;
          var maxTemp = element.main.temp_max;
          var humidity = element.main.humidity;
          var wind = element.wind.speed;
          var pressure = element.main.pressure;
          var weatherArray = element.weather;
          weatherArray.forEach(function(element,index,array) {
            condition = element.description;
            icon = element.icon;
          })
          printData = printData + "<div class='alert alert-info'><span class='temp'>" + maxTemp + "/" + minTemp + "</span><br />";
          printData = printData + "<img src='http://openweathermap.org/img/w/" + icon + ".png' /> <br />";
          printData = printData + condition + "<br />";
          printData = printData + "Humidity: " + humidity + "<br />";
          printData = printData + "Wind: " + wind + "<br />";
          printData = printData + "Pressure: " + pressure + "</div>";
        });
        $('#weather').html(printData);

      });
      </script>

    </body>
    </html>
